{"version":3,"sources":["components/Dialogs/Dialogs.module.css","components/Dialogs/DialogItem/DialogItem.module.css","components/Dialogs/DialogItem/DialogItem.jsx","components/Dialogs/Message/Message.jsx","components/Dialogs/Dialogs.jsx","components/Dialogs/DialogsContainer.jsx"],"names":["module","exports","DialogItem","props","path","id","photos","photo","userPng","className","styles","item","activeClassName","active","to","photoUser","src","alt","userName","Message","name","dangerouslySetInnerHTML","__html","message","DialogMessageForm","reduxForm","form","onSubmit","handleSubmit","Field","component","type","placeholder","Dialogs","dialog","dialogsPage","dialogs","map","d","key","small","messages","m","senderName","body","generalChat","generalMessage","i","selectDialog","value","sendMessage","userId","newMessageBody","senMessage","DialogsContainer","webSocket","send","this","initializedDialog","WebSocket","onmessage","event","JSON","parse","data","prevProps","updateDialog","React","Component","compose","connect","state","isAuth","auth","setSelectDialog"],"mappings":"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","file":"static/js/3.0cd72a23.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogs\":\"Dialogs_dialogs__1nhn8\",\"item\":\"Dialogs_item__2Rlpk\",\"message\":\"Dialogs_message__1W5ss\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"DialogItem_item__3-Ouz\",\"photoUser\":\"DialogItem_photoUser__284j5\",\"active\":\"DialogItem_active__2RQ_9\"};","import React from 'react'\r\nimport {NavLink} from 'react-router-dom'\r\nimport styles from './DialogItem.module.css'\r\nimport userPng from '../../../assets/img/user.png'\r\n\r\nconst DialogItem = (props)=>{\r\n    const path = props.id ? `/dialogs/${props.id}` : 'ws'\r\n    let photos = props.photo ? props.photo : userPng\r\n    return(\r\n        <label className={styles.item}>\r\n            <NavLink activeClassName={styles.active} to={path}>\r\n                <img className={styles.photoUser} src={photos} alt={'user'}/>\r\n                <p>{props.userName}</p>\r\n            </NavLink>\r\n        </label>\r\n    )\r\n}\r\nexport default DialogItem\r\n","import React from 'react'\r\n\r\n\r\n\r\nconst Message = (props)=>{\r\n    return(\r\n        <div>\r\n            <div  id={props.id} className={'item'}> <b> {props.name} : </b> <span dangerouslySetInnerHTML={{__html: props.message}}></span></div>\r\n        </div>\r\n    )\r\n};\r\nexport default Message\r\n","import React from 'react'\r\nimport styles from './Dialogs.module.css'\r\nimport DialogItem from './DialogItem/DialogItem'\r\nimport Message from './Message/Message'\r\nimport {Field, reduxForm} from 'redux-form'\r\n\r\nconst DialogMessage = (props) => {\r\n    return (\r\n        <form onSubmit={props.handleSubmit}>\r\n            <Field component={'textarea'} type={'text'} placeholder={'введите сообщение'} name={'newMessageBody'}  />\r\n            <div><button>add</button></div>\r\n        </form>\r\n    )\r\n}\r\nconst DialogMessageForm = reduxForm({form: 'dialogMessageForm'})(DialogMessage)\r\n\r\nconst Dialogs = (props)=> {\r\n\r\n    let dialog = props.dialogsPage.dialogs.map(d => <DialogItem key={d.id} userName={d.userName} id={d.id} photo={d.photos.small}/>)\r\n    let message = props.dialogsPage.messages.map(m => <Message key ={m.id} name={m.senderName} message={m.body}/>)\r\n    const generalChat = props.dialogsPage.generalMessage\r\n        .map((m, i) => <div className={'text'} key={m + i}><b>{m.userName} :</b> {m.message}</div>)\r\n\r\n    const onSendMessage = (value) => {\r\n        props.sendMessage(props.userId, value.newMessageBody)\r\n        value.newMessageBody = ''\r\n    }\r\n    const sendGeneralMessage = (value) => {\r\n        props.senMessage(value.newMessageBody)\r\n        value.newMessageBody = ''\r\n    }\r\n\r\n\r\n    return(\r\n        <div className={styles.dialogs}>\r\n            <div className={styles.item}>\r\n                <DialogItem userName={'Общий чат'}/>\r\n                {dialog}\r\n            </div>\r\n            <div className={styles.message} >\r\n                {!props.dialogsPage.selectDialog ?\r\n                    <>\r\n                        <div>{generalChat}</div>\r\n                        <DialogMessageForm onSubmit={sendGeneralMessage}/>\r\n                    </> :\r\n                    <>\r\n                        <div> {message} </div>\r\n                        <DialogMessageForm onSubmit={onSendMessage}/>\r\n                    </>}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default Dialogs\r\n\r\n\r\n","import React from 'react'\r\nimport {\r\n    generalChat,\r\n    initializedDialog, sendMessage, setSelectDialog,\r\n    updateDialog\r\n} from '../../redux/dialogs-reducer';\r\nimport Dialogs from './Dialogs'\r\nimport {connect} from 'react-redux'\r\nimport {compose} from 'redux'\r\n\r\nclass DialogsContainer extends React.Component {\r\n    componentDidMount() {\r\n        this.props.initializedDialog(this.props.userId)\r\n        this.webSocket = new WebSocket('wss://social-network.samuraijs.com/handlers/ChatHandler.ashx')\r\n        this.webSocket.onmessage = (event) => {\r\n            this.props.generalChat(JSON.parse(event.data))\r\n        }\r\n\r\n    }\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.userId !== this.props.userId) {\r\n            this.props.updateDialog(this.props.userId)\r\n        }\r\n    }\r\n    senMessage = (value) => {\r\n        this.webSocket.send(value)\r\n    }\r\n    render() {\r\n        return <Dialogs {...this.props} senMessage={this.senMessage} />\r\n    }\r\n}\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        dialogsPage: state.dialogsPage,\r\n        isAuth: state.auth.isAuth\r\n    }\r\n}\r\n\r\nexport default compose(\r\n    connect(mapStateToProps, { initializedDialog, updateDialog, sendMessage, setSelectDialog, generalChat})\r\n)(DialogsContainer)\r\n\r\n"],"sourceRoot":""}