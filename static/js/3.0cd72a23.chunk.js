(this.webpackJsonpmyproject=this.webpackJsonpmyproject||[]).push([[3],{286:function(e,a,t){e.exports={dialogs:"Dialogs_dialogs__1nhn8",item:"Dialogs_item__2Rlpk",message:"Dialogs_message__1W5ss"}},287:function(e,a,t){e.exports={item:"DialogItem_item__3-Ouz",photoUser:"DialogItem_photoUser__284j5",active:"DialogItem_active__2RQ_9"}},288:function(e,a,t){"use strict";t.r(a);var n=t(22),s=t(23),i=t(25),l=t(24),o=t(26),r=t(0),c=t.n(r),m=t(101),u=t(286),d=t.n(u),g=t(11),p=t(287),h=t.n(p),b=t(43),E=t.n(b),f=function(e){var a=e.id?"/dialogs/".concat(e.id):"ws",t=e.photo?e.photo:E.a;return c.a.createElement("label",{className:h.a.item},c.a.createElement(g.b,{activeClassName:h.a.active,to:a},c.a.createElement("img",{className:h.a.photoUser,src:t,alt:"user"}),c.a.createElement("p",null,e.userName)))},v=function(e){return c.a.createElement("div",null,c.a.createElement("div",{id:e.id,className:"item"}," ",c.a.createElement("b",null," ",e.name," : ")," ",c.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.message}})))},_=t(123),y=t(124),w=Object(y.a)({form:"dialogMessageForm"})((function(e){return c.a.createElement("form",{onSubmit:e.handleSubmit},c.a.createElement(_.a,{component:"textarea",type:"text",placeholder:"\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",name:"newMessageBody"}),c.a.createElement("div",null,c.a.createElement("button",null,"add")))})),M=function(e){var a=e.dialogsPage.dialogs.map((function(e){return c.a.createElement(f,{key:e.id,userName:e.userName,id:e.id,photo:e.photos.small})})),t=e.dialogsPage.messages.map((function(e){return c.a.createElement(v,{key:e.id,name:e.senderName,message:e.body})})),n=e.dialogsPage.generalMessage.map((function(e,a){return c.a.createElement("div",{className:"text",key:e+a},c.a.createElement("b",null,e.userName," :")," ",e.message)}));return c.a.createElement("div",{className:d.a.dialogs},c.a.createElement("div",{className:d.a.item},c.a.createElement(f,{userName:"\u041e\u0431\u0449\u0438\u0439 \u0447\u0430\u0442"}),a),c.a.createElement("div",{className:d.a.message},e.dialogsPage.selectDialog?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null," ",t," "),c.a.createElement(w,{onSubmit:function(a){e.sendMessage(e.userId,a.newMessageBody),a.newMessageBody=""}})):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,n),c.a.createElement(w,{onSubmit:function(a){e.senMessage(a.newMessageBody),a.newMessageBody=""}}))))},N=t(10),k=t(8),D=function(e){function a(){var e,t;Object(n.a)(this,a);for(var s=arguments.length,o=new Array(s),r=0;r<s;r++)o[r]=arguments[r];return(t=Object(i.a)(this,(e=Object(l.a)(a)).call.apply(e,[this].concat(o)))).senMessage=function(e){t.webSocket.send(e)},t}return Object(o.a)(a,e),Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.initializedDialog(this.props.userId),this.webSocket=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx"),this.webSocket.onmessage=function(a){e.props.generalChat(JSON.parse(a.data))}}},{key:"componentDidUpdate",value:function(e){e.userId!==this.props.userId&&this.props.updateDialog(this.props.userId)}},{key:"render",value:function(){return c.a.createElement(M,Object.assign({},this.props,{senMessage:this.senMessage}))}}]),a}(c.a.Component);a.default=Object(k.d)(Object(N.b)((function(e){return{dialogsPage:e.dialogsPage,isAuth:e.auth.isAuth}}),{initializedDialog:m.c,updateDialog:m.f,sendMessage:m.d,setSelectDialog:m.e,generalChat:m.b}))(D)}}]);
//# sourceMappingURL=3.0cd72a23.chunk.js.map